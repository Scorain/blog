<!-- build time:Fri May 18 2018 10:02:47 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="【译】CSS Grid重构Medium的文章布局"><meta name="keywords" content="CSS,HTML"><meta name="author" content="suny,null"><meta name="copyright" content="suny"><title>【译】CSS Grid重构Medium的文章布局 - 把浩瀚的海洋装进我胸膛</title><link rel="shortcut icon" href="../../favicon.ico"><link rel="stylesheet" href="/blog/css/index.css"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css?version=1.4.3"><script>var GLOBAL={root:"/blog/",algolia:void 0,copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},localSearch:{labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}"},path:"search.xml"}}</script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#内容部分"><span class="toc-number">1.</span> <span class="toc-text">内容部分</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#基本margins设置"><span class="toc-number">2.</span> <span class="toc-text">基本margins设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#多列使用扩展"><span class="toc-number">3.</span> <span class="toc-text">多列使用扩展</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#中型尺寸图片"><span class="toc-number">3.1.</span> <span class="toc-text">中型尺寸图片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#引用"><span class="toc-number">3.2.</span> <span class="toc-text">引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#侧面标记"><span class="toc-number">3.3.</span> <span class="toc-text">侧面标记</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="../../img/avatar.png"></div><div class="author-info__name text-center">suny</div><div class="author-info__description text-center">Blog Of Suny</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="../../archives"><span class="pull-left">文章</span><span class="pull-right">3</span></a><a class="author-info-articles__tags article-meta" href="../../tags"><span class="pull-left">标签</span><span class="pull-right">4</span></a><a class="author-info-articles__categories article-meta" href="../../categories"><span class="pull-left">分类</span><span class="pull-right">1</span></a></div></div></div><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">搜索文章</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><hr class="local-search-stats__hr"><div class="indentlev1">把浩瀚的海洋装进我胸膛,</div><div class="indentlev2">即使再小的帆也能远航。</div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><div id="content-outer"><div class="no-bg" id="top-container" style="background-image:url(true)"><div id="page-header"><span class="pull-left"><a id="site-name" href="/">suny</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/blog/">首页</a><a class="site-page" href="/blog/archives">归档</a><a class="site-page" href="/blog/tags">标签</a><a class="site-page" href="/blog/categories">分类</a></span><a class="social-icon search pull-right"><i class="fa fa-search"></i></a></div><div id="post-info"><div id="post-title">【译】CSS Grid重构Medium的文章布局</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-05-05</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="../../categories/frontend/">frontend</a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">1,673</span><span class="post-meta__separator">|</span><span>阅读时长: 6 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div id="post-content"><p>当人们想起CSS Grid的时候，想到的通常是图片网格布局和全屏页面。然而，CSS Grid事实上也是一项很适用于文章布局的技术，它可以做一些以前很难完成的事情。</p><p>在本教程中，我将阐述怎样用CSS Grid去重构著名站点Medium的文章布局。</p><a id="more"></a><p>此文灵感来自于Scrimba上的免费CSS Grid教程。<a href="https://scrimba.com/g/gR8PTE" rel="external nofollow noopener noreferrer" target="_blank">点此查看</a></p><p><img src="/blog/images/recreate-medium-article-layout-with-grid/1.png" alt="点击此图获取全部CSS Grid课程"></p><p>在<a href="https://scrimba.com/p/pWqLHa/cdp76sD" rel="external nofollow noopener noreferrer" target="_blank">本课程中的一个录屏</a>中，我的同事<a href="https://medium.com/@judofyr" rel="external nofollow noopener noreferrer" target="_blank">Magnus Holm</a>阐述了怎样将CSS Grid用于文章布局。</p><h2 id="内容部分"><a href="#内容部分" class="headerlink" title="内容部分"></a>内容部分</h2><p>我们将从一个基本的HTML文件开始，包含Medium上文章的典型内容类型。例如：标题、段落、子标题、图片、引用等等。如下所示：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Running any NPM package in the browser locally<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>JavaScript has never had any official solution for distributing packages, and every web platform (Rails, Django etc) has their own idea of how to structure and package JavaScript. In the last few years NPM has started becoming the canonical way of distribution, with Webpack as the build system, but there’s no way to load NPM packages in the browser without a server-side component.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">blockquote</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Scrimba is a platform for interactive coding screencast where</span><br><span class="line">you can run the code at any moment in time.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">blockquote</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">figure</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://mave.me/img/projects/full_placeholder.png"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">figure</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果你不调整任何布局直接在浏览器中打开此文件，你看到的是这样子的：</p><p><img src="/blog/images/recreate-medium-article-layout-with-grid/2.png" alt=""></p><p>一点也不美观。因此让我们一起用CSS Grid来调整一下吧。为了让大家都能跟得上，我们将一步一步来完成。</p><h2 id="基本margins设置"><a href="#基本margins设置" class="headerlink" title="基本margins设置"></a>基本margins设置</h2><p>我们要做的第一件事是将整个<code>&lt;article&gt;</code>标签变成一个grid容器，并设置至少三列。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">article</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">740px</span> <span class="number">1</span>fr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第一列和最后一列充当边缘部分并且自适应，它们大部分情况下包含着空白区域。中间一列固定为740px，将容纳文章的主体内容。</p><p>注意，我们没有定义行是因为每一行的高度都是由它们的自身内容所决定。文章中的每块内容（段落、图片、标题）自成一行。</p><p>下一步是确保网格中的所有内容默认开始于第二条纵向网格线。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">article</span> &gt; * &#123;</span><br><span class="line">    <span class="attribute">grid-column</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>现在我们得到如下结果：</p><p><img src="/blog/images/recreate-medium-article-layout-with-grid/3.png" alt=""></p><p>我们立刻就发现它变得稍微好看一点了，因为两边的空白区域让文本更易于阅读了。</p><p>然而，将左右<code>margin</code>属性设置为<code>auto</code>也能实现这种效果，而且更简单。我们为什么要用CSS Grid呢？</p><p>好了，当我们想要模仿Medium上的图片的某些特性的时候，问题出现了。例如插入一张全屏宽的图片，像下面这样：</p><p><img src="/blog/images/recreate-medium-article-layout-with-grid/4.jpg" alt=""></p><p>如果我们之前用了<code>margin: 0 auto</code>, 我们将只能利用负边距（margins）来使得图片占据全屏宽度，这种方法显得很hack。</p><p>使用CSS Grid的话，可以很轻易的解决这个问题，我们只需要简单的用列来设置宽度。为了确保图片占据整个宽度，我们只需要将其跨度设置为从第一列到最后一列。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">article</span> &gt; <span class="selector-tag">figure</span> &#123;</span><br><span class="line">    <span class="attribute">grid-column</span>: <span class="number">1</span> / -<span class="number">1</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">20px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们再设置一下上下边距，就得到了一幅漂亮的全屏宽的图片：</p><p><img src="/blog/images/recreate-medium-article-layout-with-grid/5.png" alt=""></p><h2 id="多列使用扩展"><a href="#多列使用扩展" class="headerlink" title="多列使用扩展"></a>多列使用扩展</h2><p>然而，这并没有为我们解决所有的问题，Medium上还有一些其他类型的布局需要我们考虑。我们一起来看几个：</p><h3 id="中型尺寸图片"><a href="#中型尺寸图片" class="headerlink" title="中型尺寸图片"></a>中型尺寸图片</h3><p>这是一种介于常规图片和全屏宽图片之间的图片，我们称之为中型尺寸图片。如下所示：</p><p><img src="/blog/images/recreate-medium-article-layout-with-grid/6.jpg" alt="提示：在移动端，此类图片和全屏宽图片表现一致。本文中，我们只关注桌面端布局"></p><p>这将需要在我们现有的布局中至少新增两列。</p><h3 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h3><p>另外，在Medium上，如果你添加一条引用，文章的左侧也会出现一条垂直线</p><p style="border-left:3px solid rgba(0,0,0,.84);padding-left:20px;margin-left:-23px">← 注意这条垂直线，我们需要在我们的网格上额外新增一列来实现它。</p><p>这需要在网格的左侧有一个小型的列，为了对称，我们将在右侧也加一个相同的列。</p><p>因此，为了支持 <strong>引用</strong> 和 <strong>中间尺寸图片</strong>，我们需要将容器宽度划分为7列而不是三列，如下所示：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">article</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">1</span>fr <span class="number">10px</span> <span class="number">740px</span> <span class="number">10px</span> <span class="number">1</span>fr <span class="number">1</span>fr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果我们使用 Chrome 检查器，我们可以显式地看到背后的网格线（如下图所示），此外，我还增加了一些箭头来标识出不同的列，以便于识别。</p><p><img src="/blog/images/recreate-medium-article-layout-with-grid/7.png" alt=""></p><p style="text-align:center"><em>我增加了箭头用于更好地识别不同列</em></p><p>接下来，我们要做的第一件事是让所有的默认子项从第四条纵向网格线开始，而不是之前的第二条。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">article</span> &gt; * &#123;</span><br><span class="line">    <span class="attribute">grid-column</span>: <span class="number">4</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后我们可以通过设置如下样式来创建中间尺寸图片：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">article</span> &gt; <span class="selector-tag">figure</span> &#123;</span><br><span class="line">    <span class="attribute">grid-column</span>: <span class="number">2</span> / -<span class="number">2</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">20px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 Chrome 检查器下展示如下这样：</p><p><img src="/blog/images/recreate-medium-article-layout-with-grid/8.png" alt=""></p><p>通过设置如下样式可以轻松创建引用：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">article</span> &gt; <span class="selector-tag">blockquote</span> &#123;</span><br><span class="line">    <span class="attribute">grid-column</span>: <span class="number">3</span> / <span class="number">5</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#666</span>;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">3px</span> solid black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们设置它的纵向跨度为从第三条网格线到第五条网格线。同时增加10px的左边距 <code>padding-left: 10px</code> 使得文本看起来像是从第四条网格线开始(第三列也是10px宽)。如下是在网格上的展示：</p><p><img src="/blog/images/recreate-medium-article-layout-with-grid/9.png" alt=""></p><h3 id="侧面标记"><a href="#侧面标记" class="headerlink" title="侧面标记"></a>侧面标记</h3><p>现在还有最后一种类型需要支持。Medium上有一个非常好的标明文章中突出内容的方式。文本变绿，并在右上角产生一个高亮标记。</p><p><img src="/blog/images/recreate-medium-article-layout-with-grid/10.png" alt=""></p><p>如果我们之前用的是 <code>margin: 0 auto</code> 而不是 CSS Grid的话，由于与文章中的其他元素的表现都不一样，右上角高亮标记文本元素的创建将会很麻烦。我们期望它出现在上一个元素的右侧而不是重起一行。如果我们没有使用CSS Grid，我们可能不得不用大量的 <code>position: absolute</code> 来实现这种效果。</p><p>使用 CSS Grid 就变得超级简单了。我们只需要设置这种元素从第五条网格线开始。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.aside</span> &#123;</span><br><span class="line">    <span class="attribute">grid-column</span>: <span class="number">5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样会自动将其置于文章的右侧。</p><p><img src="/blog/images/recreate-medium-article-layout-with-grid/11.png" alt=""></p><p>就这样，现在我们已经用 CSS Grid 重构了Medium上文章布局的绝大部分，这实际上很简单。但请注意，我们还没有涉及到响应式，这部分需要重新写一篇文章。</p><p><a href="https://scrimba.com/c/cedLJfW" rel="external nofollow noopener noreferrer" target="_blank">Scrimba上查看所有代码</a></p><p>原文：<a href="https://medium.freecodecamp.org/how-to-recreate-mediums-article-layout-with-css-grid-b4608792bad1" rel="external nofollow noopener noreferrer" target="_blank">How to recreate Medium’s article layout with CSS Grid</a></p><p>作者：<a href="https://medium.freecodecamp.org/@perborgen" rel="external nofollow noopener noreferrer" target="_blank">Per Harald Borgen</a></p><p><strong>EOF</strong></p></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:null" rel="external nofollow noopener noreferrer" target="_blank">suny</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://scorain.github.io/blog/2018/recreate-medium-article-layout-with-grid/">https://scorain.github.io/blog/2018/recreate-medium-article-layout-with-grid/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank" rel="external nofollow noopener noreferrer">CC BY-NC-SA 3.0</a> 许可协议。转载请注明来自 <a href="https://scorain.github.io/blog" target="_blank">suny</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="../../tags/CSS/">CSS</a><a class="post-meta__tags" href="../../tags/HTML/">HTML</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="../a-glance-of-frontend/"><i class="fa fa-chevron-left"></i><span>漫谈大前端</span></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="indentlev1">北风在吹着清冷的街道, 街灯在拉开长长的影子。</div><div class="copyright"><span>&copy;2018 By suny</span></div><div class="busuanzi"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/blog/js/third-party/anime.min.js"></script><script src="/blog/js/third-party/jquery.min.js"></script><script src="/blog/js/third-party/jquery.fancybox.min.js"></script><script src="/blog/js/third-party/velocity.min.js"></script><script src="/blog/js/third-party/velocity.ui.min.js"></script><script src="/blog/js/utils.js?version=1.4.3"></script><script src="/blog/js/fancybox.js?version=1.4.3"></script><script src="/blog/js/sidebar.js?version=1.4.3"></script><script src="/blog/js/copy.js?version=1.4.3"></script><script src="/blog/js/transition.js?version=1.4.3"></script><script src="/blog/js/scroll.js?version=1.4.3"></script><script src="/blog/js/head.js?version=1.4.3"></script><script src="../../js/search/local-search.js"></script></body></html><!-- rebuild by neat -->